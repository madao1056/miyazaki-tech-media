---
import BaseLayout from "@/layouts/base.astro";
import { getEntry } from "astro:content";

const entry = await getEntry("views", "series");

if (!entry) {
  return Astro.redirect("/404");
}

// 連載コラムのサンプルデータ
const seriesList = [
  {
    id: 1,
    title: "宮崎起業家列伝",
    description: "宮崎で活躍する起業家たちの挑戦ストーリーを連載形式で深く掘り下げ",
    author: "橋口真幸",
    schedule: "毎月第2金曜日更新",
    episodes: 6,
    current_episode: 2,
    featured_image: "/images/series/entrepreneur-stories.jpg",
    category: "freelance",
    slug: "miyazaki-entrepreneurs"
  },
  {
    id: 2,
    title: "家族経営の挑戦",
    description: "代々続く家族経営企業の革新と継承の物語",
    author: "橋口真幸",
    schedule: "毎月第4金曜日更新",
    episodes: 4,
    current_episode: 1,
    featured_image: "/images/series/family-business.jpg",
    category: "small-business",
    slug: "family-business-challenge"
  },
  {
    id: 3,
    title: "地方移住×起業",
    description: "宮崎に移住して新たな事業を立ち上げた経営者たちの体験記",
    author: "橋口真幸",
    schedule: "不定期更新",
    episodes: 3,
    current_episode: 1,
    featured_image: "/images/series/rural-startup.jpg",
    category: "new-workstyle",
    slug: "rural-relocation-startup"
  }
];
---

<BaseLayout entry={entry}>
  <main class="container mx-auto px-4 py-8">
    <header class="text-center mb-12">
      <h1 class="text-4xl font-bold text-gray-900 dark:text-white mb-4">
        連載コラム
      </h1>
      <p class="text-lg text-gray-600 dark:text-gray-300 max-w-2xl mx-auto">
        経営者インタビューを連載形式で特集。各業界のリーダーたちの成功ストーリー
      </p>
    </header>

    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
      {seriesList.map(series => (
        <article class="bg-white dark:bg-gray-800 rounded-lg shadow-lg overflow-hidden">
          <div class="aspect-video bg-gray-200 dark:bg-gray-700 relative">
            <img 
              src={series.featured_image} 
              alt={series.title}
              class="w-full h-full object-cover"
              onerror="this.src='/images/placeholder-series.jpg'"
            />
            <div class="absolute top-2 left-2">
              <span class="bg-primary text-white px-2 py-1 rounded text-sm">
                連載
              </span>
            </div>
            <div class="absolute bottom-2 right-2">
              <span class="bg-black bg-opacity-75 text-white px-2 py-1 rounded text-sm">
                {series.current_episode}/{series.episodes}話
              </span>
            </div>
          </div>
          
          <div class="p-6">
            <div class="flex items-center justify-between mb-3">
              <span class="text-sm text-primary font-medium">
                {series.category === 'freelance' ? 'フリーランスの世界' : 
                 series.category === 'small-business' ? '小さな会社経営' : 
                 series.category === 'new-workstyle' ? '新しい働き方' : '事業アイデア'}
              </span>
              <span class="text-sm text-gray-500">
                {series.schedule}
              </span>
            </div>
            
            <h2 class="text-xl font-bold text-gray-900 dark:text-white mb-3">
              {series.title}
            </h2>
            
            <p class="text-gray-600 dark:text-gray-300 mb-4 text-sm">
              {series.description}
            </p>
            
            <div class="flex items-center justify-between">
              <div class="flex items-center">
                <div class="w-8 h-8 bg-gray-300 rounded-full mr-2"></div>
                <span class="text-sm text-gray-700 dark:text-gray-300">
                  {series.author}
                </span>
              </div>
              <a 
                href={`/series/${series.slug}`}
                class="bg-primary text-white px-4 py-2 rounded hover:bg-primary-focus transition-colors text-sm"
              >
                詳細を見る
              </a>
            </div>
          </div>
        </article>
      ))}
    </div>
    
    <div class="text-center mt-12">
      <p class="text-gray-600 dark:text-gray-300 mb-4">
        連載コラムの企画・執筆にご興味がある方は
      </p>
      <a 
        href="/contact" 
        class="bg-secondary text-white px-6 py-3 rounded-lg hover:bg-secondary-focus transition-colors inline-block"
      >
        お問い合わせ
      </a>
    </div>
  </main>
</BaseLayout>